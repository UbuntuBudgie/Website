---
import { getCollection } from "astro:content";

const galleryImages = [
  { src: '/screens/mainscreen.jpg', alt: 'Ubuntu Budgie desktop showing a dark theme with a calendar app.', caption: 'The clean and intuitive Budgie desktop environment.' },
  { src: '/gallery/fullscreenmenu.webp', alt: 'App menu launcher displaying various applications in a grid view.', caption: 'Finding your favorite applications is fast and easy.' },
  { src: '/gallery/quicknote.jpg', alt: 'Screenshot of quick note applet.', caption: 'Quick Note applet allows you to paste anything you may need soon' },
  { src: '/gallery/sidebar.png', alt: 'A detailed shot of the Raven sidebar notification center.', caption: 'Raven sidebar for notifications and quick settings.' },
  { src: '/gallery/installer.jpg', alt: 'Ubuntu Budgie Installer', caption: 'Easily install Ubuntu Budgie via GUI installer.' },
  { src: '/gallery/power.png', alt: 'Power settings to manage system power usage.', caption: 'Power settings' },
  { src: '/gallery/greeter.png', alt: 'Visual pleasing Login Screen.', caption: 'Simple to login' },
  { src: '/gallery/classicmenu.png', alt: 'Classical Start Menu in Budgie', caption: 'Classic Start Menu' },
  { src: '/gallery/fluent-lightdark.jpg', alt: 'Fluent Light and Dark Theme Look', caption: 'Fluent Light and Dark Theme' },
  { src: '/gallery/systemoverview.png', alt: 'System Overview Information Panel', caption: 'System Overview' },
  { src: '/gallery/arm.png', alt: 'Budgie ARM TweakTool Customization', caption: 'Budgie ARM TweakTool Overview' },
  { src: '/gallery/action.png', alt: 'Quick Action Menu', caption: 'Quick Action Menu' },
  { src: '/gallery/rclock.png', alt: 'Raven Clock Widget', caption: 'Raven Clock' },
  { src: '/gallery/hotcorner.png', alt: 'Hot Corner Menu Settings', caption: 'Hot Corner Menu' },
  { src: '/gallery/wal.png', alt: 'Weather Applet Light Theme', caption: 'Weather Applet Light' },
  { src: '/gallery/wad.png', alt: 'Weather Applet Dark Theme', caption: 'Weather Applet Dark' },
  { src: '/gallery/hca.png', alt: 'Hot Corner Applet', caption: 'Hot Corner Applet' },
  { src: '/gallery/settings.png', alt: 'Budgie Settings', caption: 'Budgie Theme Settings' },
  { src: '/gallery/screenshot.png', alt: 'Screenshot Applet', caption: 'Screenshot Applet Settings' },
  { src: '/gallery/ssas.png', alt: 'Screenshot Applet Settings', caption: 'Screenshot Applet Image Settings' },
  { src: '/gallery/tal.png', alt: 'Ubuntu Budgie Welcome Themes and Layouts', caption: 'Themes and Layouts' },
  { src: '/gallery/bw.jpg', alt: 'Ubuntu Budgie Welcome', caption: 'Ubuntu Budgie Welcome' },
  { src: '/gallery/ubg.jpg', alt: 'Ubuntu Budgie Welcome Gaming Section', caption: 'Ubuntu Budgie Welcome - Gaming' },
  { src: '/gallery/extras.jpg', alt: 'Ubuntu Budgie Welcome Extras Section', caption: 'Ubuntu Budgie Welcome - Extras' },
  { src: '/gallery/exmenu.png', alt: 'Ubuntu Budgie Extended Menu', caption: 'Extended Menu' },
  { src: '/gallery/bsettings.png', alt: 'Ubuntu Budgie Settings', caption: 'Settings' },
  { src: '/gallery/hotcorners.webp', alt: 'Hotcorners Applet Actions', caption: 'Hotcorners Actions' },
  { src: '/gallery/shuffler.png', alt: 'Shuffler Applet', caption: 'Shuffler Applet' },
  { src: '/gallery/backup.png', alt: 'Backup Application', caption: 'Backup Application' },
];

const numImages = galleryImages.length;
let gridCols = "grid-cols-2 sm:grid-cols-3";
if (numImages > 3) gridCols = "grid-cols-2 sm:grid-cols-3 lg:grid-cols-4";
---

<div
  x-data="{ 
    isModalOpen: false, 
    currentImage: '', 
    currentAlt: '',
    openModal(src, alt) { this.currentImage = src; this.currentAlt = alt; this.isModalOpen = true; },
    closeModal() { this.isModalOpen = false; this.currentImage = ''; this.currentAlt = ''; }
  }"
  @keydown.escape.window="closeModal()"
  class="py-20 lg:py-32"
>
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">

    <!-- Header -->
    <div class="max-w-3xl mx-auto text-center mb-16 sm:mb-24">
      <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight text-base-900">
        Ubuntu Budgie Gallery
      </h1>
      <p class="mt-4 text-lg text-base-500">
        A visual showcase of the Budgie Desktop Environment. Click any image to view it in full size.
      </p>
    </div>

    <!-- Gallery Grid -->
    <div class={`grid ${gridCols} gap-4`}>
      {galleryImages.map(image => (
        <div 
          class="group block relative overflow-hidden rounded-lg cursor-pointer shadow-lg hover:shadow-xl transition-shadow duration-300"
          @click={`openModal('${image.src}', '${image.caption}')`}
          @keydown.enter={`openModal('${image.src}', '${image.caption}')`}
          role="button"
          tabindex="0"
        >
          <img src={image.src} alt={image.alt} class="w-full h-40 sm:h-48 object-cover bg-gray-100 rounded-lg transition-transform duration-300" loading="lazy"/>
          
          <!-- Caption -->
          <div class="absolute bottom-0 inset-x-0 p-3 bg-white/90 rounded-b-lg border-t border-gray-200">
            <p class="text-xs text-gray-700 font-medium">{image.caption}</p>
          </div>
        </div>
      ))}
    </div>

  </div>

  <!-- Modal Lightbox -->
  <template x-teleport="body">
    <div x-show="isModalOpen" class="fixed inset-0 z-9999 flex items-center justify-center p-4 bg-base-950 bg-opacity-90" @click.self="closeModal()">
      <img :src="currentImage" :alt="currentAlt" class="max-h-[90vh] object-contain rounded-lg shadow-lg"/>
    </div>
  </template>
</div>
